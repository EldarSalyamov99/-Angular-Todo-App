<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
  
  <div class="space-y-2">
    <label for="title" class="flex items-center gap-2 text-sm font-semibold text-gray-700">
      <svg class="w-5 h-5 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
      </svg>
      Название
      <span class="text-red-500">*</span>
    </label>
    <input 
      id="title" 
      type="text"
      formControlName="title"
      placeholder="Например: Купить продукты" 
      class="w-full px-4 py-3 rounded-xl border-2 transition-all duration-300"
      [class.border-gray-300]="!form.get('title')?.invalid || !form.get('title')?.touched"
      [class.focus:border-brand-500]="!form.get('title')?.invalid || !form.get('title')?.touched"
      [class.border-red-500]="form.get('title')?.invalid && form.get('title')?.touched"
      [class.focus:ring-2]="true"
      [class.focus:ring-brand-200]="!form.get('title')?.invalid || !form.get('title')?.touched"
      [class.focus:ring-red-200]="form.get('title')?.invalid && form.get('title')?.touched" />
    <div *ngIf="form.get('title')?.invalid && form.get('title')?.touched" class="text-red-500 text-sm flex items-center gap-1">
      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
      </svg>
      <span *ngIf="form.get('title')?.hasError('required')">Обязательное поле</span>
      <span *ngIf="form.get('title')?.hasError('minlength')">Минимум 3 символа</span>
      <span *ngIf="form.get('title')?.hasError('maxlength')">Максимум 100 символов</span>
    </div>
  </div>

  
  <div class="space-y-2">
    <label for="description" class="flex items-center gap-2 text-sm font-semibold text-gray-700">
      <svg class="w-5 h-5 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
      </svg>
      Описание
    </label>
    <textarea 
      id="description" 
      formControlName="description"
      rows="3"
      placeholder="Краткие детали задачи..." 
      class="w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 transition-all duration-300 resize-none">
    </textarea>
    <div *ngIf="form.get('description')?.hasError('maxlength')" class="text-red-500 text-sm flex items-center gap-1">
      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
      </svg>
      <span>Максимум 1000 символов</span>
    </div>
  </div>

  
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    
    <div class="space-y-2">
      <label for="priority" class="flex items-center gap-2 text-sm font-semibold text-gray-700">
        <svg class="w-5 h-5 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"></path>
        </svg>
        Приоритет
        <span class="text-red-500">*</span>
      </label>
      <select 
        id="priority" 
        formControlName="priority"
        class="w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 transition-all duration-300">
        <option value="" disabled>Выберите приоритет</option>
        <option [value]="TaskPriority.LOW">Низкий</option>
        <option [value]="TaskPriority.MEDIUM">Средний</option>
        <option [value]="TaskPriority.HIGH">Высокий</option>
      </select>
    </div>

    
    <div class="space-y-2">
      <label for="status" class="flex items-center gap-2 text-sm font-semibold text-gray-700">
        <svg class="w-5 h-5 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Статус
        <span class="text-red-500">*</span>
      </label>
      <select 
        id="status" 
        formControlName="status"
        class="w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 transition-all duration-300">
        <option [value]="TaskStatus.PENDING">Активная</option>
        <option [value]="TaskStatus.COMPLETED">Завершена</option>
      </select>
    </div>

    
    <div class="space-y-2">
      <label for="dueDate" class="flex items-center gap-2 text-sm font-semibold text-gray-700">
        <svg class="w-5 h-5 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
        </svg>
        Дедлайн
      </label>
      <input 
        type="date"
        id="dueDate" 
        formControlName="dueDate"
        class="w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:border-brand-500 focus:ring-2 focus:ring-brand-200 transition-all duration-300" />
    </div>
  </div>

  
  <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
    <button 
      type="button"
      (click)="onCancel()"
      class="flex-1 sm:flex-none px-8 py-3 rounded-xl border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-all duration-300">
      Отмена
    </button>
    <button 
      type="submit"
      [disabled]="form.invalid"
      class="flex-1 sm:flex-none px-8 py-3 rounded-xl font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
      [class.btn-gradient-primary]="!form.invalid"
      [class.bg-gray-300]="form.invalid"
      [class.text-white]="true">
      <span *ngIf="!loading" class="flex items-center justify-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        Сохранить
      </span>
      <span *ngIf="loading" class="flex items-center justify-center gap-2">
        <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Сохранение...
      </span>
    </button>
  </div>
</form>